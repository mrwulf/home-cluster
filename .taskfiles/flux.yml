---
version: "3"

tasks:
  sync:
    desc: Sync flux-system with the Git Repository
    cmds:
      - flux reconcile source git flux-system
      - flux reconcile kustomization core
      - flux reconcile kustomization apps
    silent: true

  diff:
    cmds:
      - flux diff kustomization --path `git rev-parse --show-toplevel`/cluster/base flux-system
