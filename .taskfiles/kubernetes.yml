---
version: "3"

tasks:
  getpods:
    aliases:
      - "gp"
    desc: "Get Pods"
    interactive: false
    silent: false
    vars:
      CURRENT_NAMESPACE:
        sh: "kubectl config view --minify -o jsonpath='{..namespace}' || echo ''"
      NAMESPACE: "{{.namespace | default .CURRENT_NAMESPACE}}"
    requires:
      vars: ["NAMESPACE"]
    cmds:
      - |
        kubectl get pods -n {{.NAMESPACE}} -owide --sort-by='{.metadata.creationTimestamp}'

  getallpods:
    aliases:
      - "gpa"
    desc: "Get All Pods"
    interactive: false
    silent: false
    vars:
      CURRENT_NAMESPACE:
        sh: "kubectl config view --minify -o jsonpath='{..namespace}' || echo ''"
      NAMESPACE: "{{.namespace | default .CURRENT_NAMESPACE}}"
    requires:
      vars: ["NAMESPACE"]
    cmds:
      - |
        kubectl get pods -A -owide --sort-by='{.metadata.creationTimestamp}'

  getno:
    alias: "gn"
    desc: Get Nodes
    interactive: false
    silent: false
    vars:
      CURRENT_NAMESPACE:
        sh: "kubectl config view --minify -o jsonpath='{..namespace}' || echo ''"
      NAMESPACE: "{{.namespace | default .CURRENT_NAMESPACE}}"
    requires:
      vars: ["NAMESPACE"]
    cmds:
      - |
        kubectl get nodes -owide --sort-by='{.metadata.creationTimestamp}'
