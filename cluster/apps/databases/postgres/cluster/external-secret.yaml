---
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: postgres-superuser
  namespace: development
spec:
  target:
    # name: postgres-superuser
    deletionPolicy: Delete
    template:
      type: Opaque
      data:
        username: |-
          {{ .username }}
        password: |-
          {{ .password }}
  refreshInterval: 15m
  dataFrom:
    - extract:
        # Postgres Superuser
        key: c7f4f8c1-6960-448d-b1ef-df60892e22b4
        property: 'username'
      sourceRef:
        storeRef:
          name: bitwarden-login
          kind: ClusterSecretStore
    - extract:
        # Postgres Superuser
        key: c7f4f8c1-6960-448d-b1ef-df60892e22b4
        property: 'password'
      sourceRef:
        storeRef:
          name: bitwarden-login
          kind: ClusterSecretStore
  # data:
  #   - secretKey: username
  #     sourceRef:
  #       storeRef:
  #         name: bitwarden-login
  #         kind: ClusterSecretStore
  #     remoteRef:
  #       key: c7f4f8c1-6960-448d-b1ef-df60892e22b4
  #       property: username
  #   - secretKey: password
  #     sourceRef:
  #       storeRef:
  #         name: bitwarden-login
  #         kind: ClusterSecretStore
  #     remoteRef:
  #       key: c7f4f8c1-6960-448d-b1ef-df60892e22b4
  #       property: password
